# SPDX-License-Identifier: MIT
# Copyright 2023 hirmiura (https://github.com/hirmiura)
#
SHELL := /bin/bash

# 各種ディレクトリ
D_LIST		:= $(shell ls -d */ | sed 's/\/$$//')


#==============================================================================
# カラーコード
# ヘルプ表示
#==============================================================================
include ../ColorCode.mk
include ../Help.mk


#==============================================================================
# セットアップ
#==============================================================================
.PHONY: setup
setup: ## セットアップ - ビルドの前準備
setup:
	$(foreach c,$(D_LIST),$(MAKE) -C $(c) $@ && ) true


#==============================================================================
# ビルド
#==============================================================================
.PHONY: build
build: ## ビルドする
build:
	$(foreach c,$(D_LIST),$(MAKE) -C $(c) $@ && ) true


#==============================================================================
# クリーンアップ
#==============================================================================
.PHONY: clean clean-all clean-backup
clean: ## セットアップで生成したファイル以外を全て削除します
clean:
	$(foreach c,$(D_LIST),$(MAKE) -C $(c) $@ && ) true

clean-all: ## 生成した全てのファイルを削除します
clean-all:
	$(foreach c,$(D_LIST),$(MAKE) -C $(c) $@ && ) true

clean-backup: ## バックアップファイルを削除します
clean-backup:
	$(foreach c,$(D_LIST),$(MAKE) -C $(c) $@ && ) true
